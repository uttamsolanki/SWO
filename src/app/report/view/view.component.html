
<div class="animated fadeIn">

  <div class="row" *ngIf="showContent">

    <div class="col-lg-12">
      <div class="card">
        <div class="card-header">
         Scenario
          <div class="card-header-actions">
            <button type="button" class="card-header-action btn btn-link btn-setting"><i class="icon-settings"></i></button>
            <button type="button" class="card-header-action btn btn-link btn-minimize"><i class={{iconCollapse}}></i></button>
            <button type="button" class="card-header-action btn btn-link btn-close"><i class="icon-close"></i></button>
          </div>
        </div>
        <div class="card-body">
          <form class="form-horizontal">
            <div class="form-group row">
              <label class="offset-md-2 col-md-3 col-form-label" for="project">Select Project</label>
              <div class="col-md-3">
                <select id="project" name="project" class="form-control"  [(ngModel)]="selectedProject" (change)="changeProject()">
                  <option value="0">Please Project</option>
                  <option *ngFor="let p of projects" value="{{p._id}}" >{{p.name}}</option>
                </select>
              </div>

              <!--<div class="offset-md-2 col-md-2">-->
                <!--<button type="button" class="btn btn-block btn-success">Create Scenario</button>-->
              <!--</div>-->
            </div>
            <div class="form-group row" *ngIf="selectedProject!='0'">
              <label class="offset-md-2 col-md-3 col-form-label" for="project">Select Scenario</label>
              <div class="col-md-5 col-form-label" >
                <div class="form-check form-check-inline mr-1" *ngFor="let sc of scenarios;let i = index;">
                  <input class="form-check-input" [disabled]="!selectScenario[sc.id] && isDisable" type="checkbox" id="inline-checkbox1" [(ngModel)]="selectScenario[sc.id]" value="{{sc.id}}" (ngModelChange)="selectSenario()" [ngModelOptions]="{standalone: true}">
                  <label class="form-check-label p-1" for="inline-checkbox1">Scenario {{i+1}}</label>
                </div>
              </div>
            </div>
            <div class="col-lg-12" *ngIf="selectedProject=='0'">
              <p class="msg-text-center">You have not selected any project.</p>
            </div>
            <div class="col-lg-12" *ngIf="selectedProject!='0' && !count">
              <p class="msg-text-center">You have not selected any scenario.</p>
            </div>
<!--            <div class="col-lg-12" *ngIf="selectedProject!='0' && count">-->
<!--              <div class="row">-->
<!--                <div class="col-lg-{{noOfcolumn}}">-->
<!--                  <div class="form-group row">-->
<!--                    <label class="col-md-12 col-form-label"><strong>Total CO2 Equivalent </strong></label>-->
<!--                  </div>-->
<!--                </div>-->
<!--                <ng-container *ngFor="let sc of scenarios;let i = index;">-->
<!--                <div class="col-lg-{{noOfcolumn}}"  *ngIf="selectScenario[sc.id]">-->
<!--                  <div class="form-group row" >-->
<!--                    <label class="col-md-12 col-form-label"><strong>Scenario {{i+1}} </strong></label>-->
<!--                  </div>-->
<!--                </div>-->
<!--                </ng-container>-->
<!--              </div>-->
<!--            </div>-->
            <hr *ngIf="selectedProject!='0' && count">
            <div class="view-class" *ngIf="selectedProject!='0' && count">
                <div *ngFor="let sc of scenarios;let i = index;">
                <div class="view-components" *ngIf="selectScenario[sc.id]">
<!--                    <div class="view-components">-->
                  <div class="form-group">
                    <table>
                      <tr>
                      <th>Total CO2 Equivalent</th>
                        <th>Scenario {{i+1}}</th>
                      </tr>
                      <tr>
                        <td><label class=" col-form-label">Electricity Emissions</label></td>
                        <td><label class=" col-form-label">{{sc.electical.toFixed(1)}}</label></td>
                      </tr>
                      <tr>
                        <td><label class=" col-form-label">On-site Process Emissions</label></td>
                        <td><label class=" col-form-label">{{sc.OnProcess.toFixed(1)}}</label></td>
                      </tr>
                      <tr>
                        <td><label class=" col-form-label">Chemical Usage</label></td>
                        <td><label class=" col-form-label">{{sc.chemical.toFixed(1)}}</label></td>
                      </tr>
                      <tr>
                        <td><label class=" col-form-label">Biosolids Transportation</label></td>
                        <td><label class=" col-form-label">{{sc.transporation.toFixed(1)}}</label></td>
                      </tr>
                    <tr>
                      <td><label class=" col-form-label"><strong>Sub Total Prior to Energy Recovery:</strong></label>
<!--                    <label class=" col-form-label">Energy Recovery Credit (From WWTP)</label>-->
                      <td><label class=" col-form-label">{{sc.priorElectrical}}</label></td>
                    </tr>
                      <tr>
                        <td><label class=" col-form-label">Energy Recovery Credit (From external sources)</label></td>
                        <td><label class=" col-form-label">{{sc.energy.toFixed(1)}}</label></td>
                      </tr>
<!--                    <label class=" col-form-label">?</label>-->
                      <tr>
                        <td><label class=" col-form-label"><strong>Net Emissions prior to Biosolids Disposal:</strong></label></td>
                        <td><label class=" col-form-label">{{sc.priorBiosolid}}</label></td>
                      </tr>
                      <tr>
                        <td><label class=" col-form-label">Biosolids Disposal Emissions</label></td>
                        <td><label class=" col-form-label">{{sc.disposal.toFixed(1)}}</label></td>
                      </tr>
                      <tr>
                        <td><label class=" col-form-label"><strong>Total Emissions including Biosolids Disposal: </strong></label></td>
                        <td><label class=" col-form-label">{{sc.process.toFixed(1)}}</label></td>
                      </tr>
                    </table>
                    <div class="form-group chart-align" >
                        <canvas #piChart baseChart class="chart"
                                [data]="pieChartData"
                                [options]="pieChartOptions"
                                [labels]="pieChartLabels"
                                [legend]="pieChartLegend"
                                [chartType]="pieChartType"
                                (chartHover)="chartHovered($event)"
                                (chartClick)="chartClicked($event)">
                        </canvas>
                    </div>
<!--&lt;!&ndash;                  </div>&ndash;&gt;-->
<!--                      <div class="form-group view-table">-->
                          <div><strong>
                            On-site Process Emissions Summary: </strong>[<span class="help-block" *ngIf="unit">kg CO<sub>2</sub>/d</span><span class="help-block" *ngIf="!unit">kg CO<sub>2</sub>/1000m<sup>3</sup></span>]
                          </div>
                          <div>
                            <table class="table table-bordered view-table">
                              <thead>
                              <tr>
                                <th></th>
                                <th>Activated Sludge</th>
                                <th>Aerobic Digester</th>
                                <th>Anaerobic Digester</th>
                                <th>Total</th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr>
                                <td>CO<sub>2</sub> Emission</td>
                                <td>{{sc.active_sludgeco2}}</td>
                                <td>{{sc.aerobicco2}}</td>
                                <td>{{sc.anarobicco2}}</td>
                                <td>{{(sc.active_sludgeco2+sc.aerobicco2+sc.anarobicco2).toFixed(2)}}</td>
                              </tr>
                              <tr>
                                <td>N<sub>2</sub>O Emission</td>
                                <td>{{sc.active_sludgeno2}}</td>
                                <td>0</td>
                                <td>0</td>
                                <td>{{sc.active_sludgeno2}}</td>
                              </tr>
                              <tr>
                                <td>CH<sub>4</sub> Emission</td>
                                <td>0</td>
                                <td>{{sc.aerobicch4}}</td>
                                <td>{{sc.anarobicch4}}</td>
                                <td>{{(sc.aerobicch4+sc.anarobicch4).toFixed(2)}}</td>
                              </tr>
                              <tr>
                                <td><strong>Total</strong></td>
                                <td><strong>{{sc.active_sludgetotalCo2}}</strong></td>
                                <td><strong>{{sc.aerobictotalCo2}}</strong></td>
                                <td><strong>{{sc.anarobictotalCo2}}</strong></td>
                                <td><strong>{{sc.OnSiteCo2}}</strong></td>
                              </tr>
                              <tr>
                                <td colspan="5"></td>
                              </tr>
                              <tr>
                                <td>CO<sub>2</sub>, %</td>
                                <td>{{(sc.active_sludgeco2/sc.OnSiteCo2*100).toFixed(2)}}%</td>
                                <td>{{(sc.aerobicco2/sc.OnSiteCo2*100).toFixed(2)}}%</td>
                                <td>{{(sc.anarobicco2/sc.OnSiteCo2*100).toFixed(2)}}%</td>
                                <td>{{((active_sludgeco2+aerobicco2+anarobicco2)/OnSiteCo2*100).toFixed(2)}}%</td>
                              </tr>
                              <tr>
                                <td>N<sub>2</sub>O, %</td>
                                <td>{{(active_sludgeno2/OnSiteCo2*100).toFixed(2)}}%</td>
                                <td>0</td>
                                <td>0</td>
                                <td>{{(active_sludgeno2/OnSiteCo2*100).toFixed(2)}}%</td>
                              </tr>
                              <tr>
                                <td>CH<sub>4</sub>, %</td>
                                <td>0</td>
                                <td>{{(aerobicch4/OnSiteCo2*100).toFixed(2)}}%</td>
                                <td>{{(anarobicch4/OnSiteCo2*100).toFixed(2)}}%</td>
                                <td>{{((aerobicch4+anarobicch4)/OnSiteCo2*100).toFixed(2)}}%</td>
                              </tr>
                              <tr>
                                <td><strong>Total</strong></td>
                                <td><strong>{{(active_sludgetotalCo2/OnSiteCo2*100).toFixed(2)}}%</strong></td>
                                <td><strong>{{(aerobictotalCo2/OnSiteCo2*100).toFixed(2)}}%</strong></td>
                                <td><strong>{{(anarobictotalCo2/OnSiteCo2*100).toFixed(2)}}%</strong></td>
                                <td><strong>{{(OnSiteCo2/OnSiteCo2*100).toFixed(2)}}%</strong></td>
                              </tr>
                              </tbody>
                            </table>
                          </div>
                      <div>
                        <div>
                          Total Process Emissions Summary: [<span class="help-block" *ngIf="unit">kg CO<sub>2</sub>/d</span><span class="help-block" *ngIf="!unit">kg CO<sub>2</sub>/1000m<sup>3</sup></span>]
                        </div>
                        <div>
                          <table class="table table-bordered view-table">
                            <thead>
                            <tr>
                              <th></th>
                              <th>Activated Sludge</th>
                              <th>Aerobic Digester</th>
                              <th>Anaerobic Digester</th>
                              <th>Biosolids Disposal</th>
                              <th>Biosolids Transportation</th>
                              <th>Total</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                              <td>CO<sub>2</sub> Emission</td>
                              <td>{{active_sludgeco2}}</td>
                              <td>{{aerobicco2}}</td>
                              <td>{{anarobicco2}}</td>
                              <td>{{disposalco2}}</td>
                              <td>{{transporationtotalCo2}}</td>
                              <td>{{(active_sludgeco2+aerobicco2+anarobicco2+disposalco2+transporationtotalCo2).toFixed(2)}}</td>
                            </tr>
                            <tr>
                              <td>N<sub>2</sub>O Emission</td>
                              <td>{{active_sludgeno2}}</td>
                              <td>0</td>
                              <td>0</td>
                              <td>0</td>
                              <td>0</td>
                              <td>{{active_sludgeno2}}</td>
                            </tr>
                            <tr>
                              <td>CH<sub>4</sub> Emission</td>
                              <td>0</td>
                              <td>{{aerobicch4}}</td>
                              <td>{{anarobicch4}}</td>
                              <td>{{disposalch4}}</td>
                              <td>0</td>
                              <td>{{(aerobicch4+anarobicch4+disposalch4).toFixed(2)}}</td>
                            </tr>
                            <tr>
                              <td><strong>Total</strong></td>
                              <td><strong>{{active_sludgetotalCo2}}</strong></td>
                              <td><strong>{{aerobictotalCo2}}</strong></td>
                              <td><strong>{{anarobictotalCo2}}</strong></td>
                              <td><strong>{{disposaltotalCo2}}</strong></td>
                              <td><strong>{{transporationtotalCo2}}</strong></td>
                              <td><strong>{{ProcessCo2}}</strong></td>
                            </tr>
                            <tr>
                              <td colspan="5"></td>
                            </tr>
                            <tr>
                              <td>CO<sub>2</sub>, %</td>
                              <td>{{(active_sludgeco2/ProcessCo2*100).toFixed(2)}}%</td>
                              <td>{{(aerobicco2/ProcessCo2*100).toFixed(2)}}%</td>
                              <td>{{(anarobicco2/ProcessCo2*100).toFixed(2)}}%</td>
                              <td>{{(disposalco2/ProcessCo2*100).toFixed(2)}}%</td>
                              <td>{{(transporationtotalCo2/ProcessCo2*100).toFixed(2)}}%</td>
                              <td>{{((active_sludgeco2+aerobicco2+anarobicco2+disposalco2+transporationtotalCo2)/ProcessCo2*100).toFixed(2)}}%</td>
                            </tr>
                            <tr>
                              <td>N<sub>2</sub>O, %</td>
                              <td>{{(active_sludgeno2/ProcessCo2*100).toFixed(2)}}%</td>
                              <td>0</td>
                              <td>0</td>
                              <td>0</td>
                              <td>0</td>
                              <td>{{(active_sludgeno2/ProcessCo2*100).toFixed(2)}}%</td>
                            </tr>
                            <tr>
                              <td>CH<sub>4</sub>, %</td>
                              <td>0</td>
                              <td>{{(aerobicch4/ProcessCo2*100).toFixed(2)}}%</td>
                              <td>{{(anarobicch4/ProcessCo2*100).toFixed(2)}}%</td>
                              <td>{{(disposalch4/ProcessCo2*100).toFixed(2)}}%</td>
                              <td>0</td>
                              <td>{{((aerobicch4+anarobicch4+disposalch4)/ProcessCo2*100).toFixed(2)}}%</td>
                            </tr>
                            <tr>
                              <td><strong>Total, %</strong></td>
                              <td><strong>{{(active_sludgetotalCo2/ProcessCo2*100).toFixed(2)}}%</strong></td>
                              <td><strong>{{(aerobictotalCo2/ProcessCo2*100).toFixed(2)}}%</strong></td>
                              <td><strong>{{(anarobictotalCo2/ProcessCo2*100).toFixed(2)}}%</strong></td>
                              <td><strong>{{(disposaltotalCo2/ProcessCo2*100).toFixed(2)}}%</strong></td>
                              <td><strong>{{(transporationtotalCo2/ProcessCo2*100).toFixed(2)}}%</strong></td>
                              <td><strong>{{(ProcessCo2/ProcessCo2*100).toFixed(2)}}%</strong></td>
                            </tr>
                            </tbody>
                          </table>
                        </div>
                        <div class="form-group chart-align" *ngIf="isChart">
                          <canvas style="background-color: beige" baseChart #stackChart="base-chart" class="chart"
                                    [datasets]="stackChartData"
                                    [labels]="stackChartLabels"
                                    [options]="stackChartOptions"
                                    [colors]="stackChart1Colours"
                                    [legend]="stackChartLegend"
                                    [chartType]="stackChartType"
                                    (chartHover)="chartHovered($event)"
                                    (chartClick)="chartClicked($event)">
                          </canvas>
                        </div>
                      </div>
                      </div>
<!--                    </div>-->
                </div>
                </div>
            </div>
          </form>
        </div>
      </div>
    </div> <!--/.col-->
  </div>
</div>
